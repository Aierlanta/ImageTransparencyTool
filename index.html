<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片透明度调整工具</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-image"></i> 图片透明度调整工具</h1>
            <p class="subtitle">轻松调整图片透明度，支持实时预览和多种背景色</p>
        </header>

        <main class="main-content">
            <!-- 上传区域 -->
            <section class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-content">
                        <i class="fas fa-cloud-upload-alt upload-icon"></i>
                        <h3>上传图片</h3>
                        <p>拖拽图片到此处或点击选择文件</p>
                        <p class="file-info">支持 PNG、JPG、JPEG、GIF、WebP 格式</p>
                        <input type="file" id="fileInput" accept="image/*" hidden>
                        <button class="upload-btn" id="uploadBtn">
                            <i class="fas fa-folder-open"></i> 选择文件
                        </button>
                    </div>
                </div>
                <div class="upload-progress" id="uploadProgress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <span class="progress-text" id="progressText">0%</span>
                </div>
            </section>

            <!-- 控制面板 -->
            <section class="control-panel" id="controlPanel" style="display: none;">
                <div class="control-group">
                    <h3><i class="fas fa-adjust"></i> 透明度调整</h3>
                    <div class="opacity-controls">
                        <div class="slider-container">
                            <input type="range" id="opacitySlider" min="0" max="100" value="100" class="opacity-slider">
                            <div class="slider-labels">
                                <span>0%</span>
                                <span>50%</span>
                                <span>100%</span>
                            </div>
                        </div>
                        <div class="opacity-input-group">
                            <input type="number" id="opacityInput" min="0" max="100" value="100" class="opacity-input">
                            <span class="input-unit">%</span>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <h3><i class="fas fa-palette"></i> 背景色设置</h3>
                    <div class="background-controls">
                        <div class="preset-colors">
                            <h4>预设颜色</h4>
                            <div class="color-presets">
                                <button class="color-preset active" data-color="#ffffff" title="纯白">
                                    <div class="color-circle" style="background: #ffffff;"></div>
                                    <span>纯白</span>
                                </button>
                                <button class="color-preset" data-color="#f5f5f5" title="浅灰">
                                    <div class="color-circle" style="background: #f5f5f5;"></div>
                                    <span>浅灰</span>
                                </button>
                                <button class="color-preset" data-color="#808080" title="中灰">
                                    <div class="color-circle" style="background: #808080;"></div>
                                    <span>中灰</span>
                                </button>
                                <button class="color-preset" data-color="#404040" title="深灰">
                                    <div class="color-circle" style="background: #404040;"></div>
                                    <span>深灰</span>
                                </button>
                                <button class="color-preset" data-color="#000000" title="纯黑">
                                    <div class="color-circle" style="background: #000000;"></div>
                                    <span>纯黑</span>
                                </button>
                            </div>
                        </div>
                        <div class="custom-color">
                            <h4>自定义颜色</h4>
                            <div class="color-picker-container">
                                <input type="color" id="colorPicker" value="#ffffff" class="color-picker">
                                <label for="colorPicker" class="color-picker-label">
                                    <i class="fas fa-eyedropper"></i> 选择颜色
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <h3><i class="fas fa-download"></i> 下载设置</h3>
                    <div class="download-controls">
                        <div class="format-selection">
                            <h4>输出格式</h4>
                            <div class="format-options">
                                <label class="format-option">
                                    <input type="radio" name="outputFormat" value="png" checked>
                                    <span class="format-label">
                                        <i class="fas fa-image"></i>
                                        <strong>PNG</strong>
                                        <small>支持透明度</small>
                                    </span>
                                </label>
                                <label class="format-option">
                                    <input type="radio" name="outputFormat" value="jpg">
                                    <span class="format-label">
                                        <i class="fas fa-file-image"></i>
                                        <strong>JPG</strong>
                                        <small>较小文件</small>
                                    </span>
                                </label>
                            </div>
                        </div>
                        <div class="filename-input-group">
                            <input type="text" id="filenameInput" placeholder="输入文件名" class="filename-input">
                            <span class="file-extension" id="fileExtension">.png</span>
                        </div>
                        <div class="jpg-background-color" id="jpgBackgroundColor" style="display: none;">
                            <h4>JPG背景色</h4>
                            <p class="format-note">JPG不支持透明度，请选择背景色：</p>
                            <div class="jpg-bg-options">
                                <label class="jpg-bg-option">
                                    <input type="radio" name="jpgBgColor" value="white" checked>
                                    <span class="jpg-bg-label">
                                        <div class="jpg-bg-circle" style="background: #ffffff;"></div>
                                        白色
                                    </span>
                                </label>
                                <label class="jpg-bg-option">
                                    <input type="radio" name="jpgBgColor" value="current">
                                    <span class="jpg-bg-label">
                                        <div class="jpg-bg-circle" id="currentBgPreview"></div>
                                        当前背景色
                                    </span>
                                </label>
                            </div>
                        </div>
                        <button class="download-btn" id="downloadBtn">
                            <i class="fas fa-download"></i> 下载图片
                        </button>
                    </div>
                </div>
            </section>

            <!-- 预览区域 -->
            <section class="preview-section" id="previewSection" style="display: none;">
                <h3><i class="fas fa-eye"></i> 实时预览</h3>
                <div class="preview-container" id="previewContainer">
                    <div class="preview-background" id="previewBackground">
                        <canvas id="previewCanvas" class="preview-canvas"></canvas>
                    </div>
                    <div class="preview-info">
                        <div class="image-info" id="imageInfo"></div>
                        <div class="current-settings" id="currentSettings">
                            <span>透明度: <strong id="currentOpacity">100%</strong></span>
                            <span>背景色: <strong id="currentBgColor">#ffffff</strong></span>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="footer">
            <p>&copy; 2024 图片透明度调整工具 | 客户端处理，保护您的隐私</p>
        </footer>
    </div>

    <!-- 提示消息 -->
    <div class="toast" id="toast"></div>

    <script src="script.js"></script>
</body>
</html>
